name: sonic-vxlan
prefix: ""
mgmt: {}
topology:
  defaults:
    binds:
      - conf/daemons:/etc/frr/daemons
    sysctls:
      net.ipv6.conf.all.disable_ipv6: 0
  kinds:
    linux:
      image: frrouting/frr:v7.5.1
    sonic-vs:
      image: sonic-vs:202111
      binds:
        - conf/start.sh:/usr/bin/start.sh
  nodes:
    leaf01:
      kind: sonic-vs
      binds:
        - conf/leaf01.yaml:/etc/sonic/custom_setup.yaml
        - conf/leaf01.conf:/etc/frr/frr.conf
    leaf02:
      kind: sonic-vs
      binds:
        - conf/leaf02.yaml:/etc/sonic/custom_setup.yaml
        - conf/leaf02.conf:/etc/frr/frr.conf
    server01:
      kind: linux
      binds:
        - conf/server01.conf:/etc/frr/frr.conf
    server02:
      kind: linux
      binds:
        - conf/server02.conf:/etc/frr/frr.conf
    spine01:
      kind: sonic-vs
      binds:
        - conf/spine01.yaml:/etc/sonic/custom_setup.yaml
        - conf/spine01.conf:/etc/frr/frr.conf
    spine02:
      kind: sonic-vs
      binds:
        - conf/spine02.yaml:/etc/sonic/custom_setup.yaml
        - conf/spine02.conf:/etc/frr/frr.conf
  links:
  - endpoints: ["spine01:eth1", "leaf01:eth1"]
  - endpoints: ["spine01:eth2", "leaf02:eth1"]
  - endpoints: ["spine02:eth1", "leaf01:eth2"]
  - endpoints: ["spine02:eth2", "leaf02:eth2"]
  - endpoints: ["leaf01:eth3", "server01:eth1"]
  - endpoints: ["leaf02:eth3", "server02:eth1"]
